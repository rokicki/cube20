<html><head><title>God's Number is 20</title>
<style>
body { font-family: Arial, Helvetica, sans-serif; }
table { 
   border-collapse: collapse;
   border: solid black 3px;
}
td, th {
   padding: 5px;
   border: solid 1px;
   text-align: center;
}
.notes {
   text-align: left;
}
h1 {
   text-align: center;
}
.leftfloat {
   float: left ;
   margin: 10px ;
}
.rightfloat {
   float: right ;
   margin: 10px ;
}
.caption {
   width: 300px ;
}
.iecenter {
   text-align: center ;
}
.center {
   margin: auto ;
}
</style>
</head><body>
<h1>God's Number is 20</h1>

<div class="leftfloat">
<applet id="theApplet" mayscript="mayscript"
        codebase="." archive="RubikPlayerFlat.jar" code="RubikPlayerFlat"
        width="270" height="300">

     <-- Set applet parameters here: -->
     <param name="script"
            value="R-U2BL-FU-BDFUD-LD2F-RB-DF-U-B-UD-" />

     <-- Set recommended parameters for Sun Java plug in here: -->
     <param name="codebase_lookup" value="false" />
     <param name="classloader_cache" value="false" />
     <param name="java_arguments" value="-Djnlp.packEnabled=true" />
     <param name="image" value="Splash.gif" />
     <param name="boxborder" value="false" />
     <param name="centerimage" value="true" />
</applet>
<div class="caption">
Superflip, the first position proven to require 20 moves.
</div>
</div>
Every position of Rubik's Cube&trade; can be solved in twenty moves or less.
<p>
With about 35 CPU-years of idle computer time donated by Google,
a team of researchers has essentially solved every position of the
Rubik's Cube&trade;, and shown that no position requires more than twenty
moves.
<p>
Every solver of the Cube uses an algorithm, which is a sequence of
steps for solving the Cube.  One algorithm might
use a sequence of twists to solve the top face, then another
sequence of twists to position the middle edges, and so on.
There are many different algorithms, varying in complexity and number
of moves required, but those that can be memorized by a mortal
typically require forty to fifty moves.
<p>
One may suppose God would use a much more efficient algorithm, one
that always uses the shortest sequence of twists; this is known as
<a href="http://en.wikipedia.org/wiki/God%27s_algorithm"
>God's Algorithm</a>.  The number of twists this algorithm would take
in the worst case is called God's Number.  And today, for the first
time, God's Number has been shown to be 20.
<p>
It took fifteen years after the introduction of the Cube to find the
first position that provably required twenty moves to solve; it is
appropriate that fifteen years after that, we prove that twenty moves
suffice for all positions.
<h2>A History of God's Number</h2>
<p>
By 1980, a lower bound of 18 had been established for God's number by
analying the number of effectively distinct move sequences of 17 or
fewer moves, and finding that there were fewer such sequences than
Cube positions.  The first
upper bound was probably around 80 or so from the algorithm in one
of the early solution booklets.  This table summarizes the
subsequent results.
<p>
<table>
<tr><th>Date</th><th>Lower bound</th><th>Upper bound</th>
<th>Gap</th><th>Notes</th></tr>
<tr><td>July, 1981</td><td>18</td><td>52</td><td>34</td>
<td class="notes">Morwen Thistlethwaite proves <a
href="http://www.jaapsch.net/puzzles/thistle.htm">52 moves</a>
suffice.</td></tr>
<tr><td>April, 1992</td><td>18</td><td>42</td><td>24</td>
<td class="notes">Hans Kloosterman improves this to <a
href="http://www.math.rwth-aachen.de/~Martin.Schoenert/Cube-Lovers/michael_reid__an_upper_bound_on_god%27s_number.html"
>42 moves.</a></td></tr>
<tr><td>May, 1992</td><td>18</td><td>39</td><td>21</td>
<td class="notes">Michael Reid shows <a
href="http://www.math.rwth-aachen.de/~Martin.Schoenert/Cube-Lovers/michael_reid__new_upper_bound.html"
>39 moves</a> is always sufficient.</td></tr>
<tr><td>May, 1992</td><td>18</td><td>37</td><td>19</td>
<td class="notes">Dik Winter lowers this to <a
href="http://www.math.rwth-aachen.de/~Martin.Schoenert/Cube-Lovers/Dik_T._Winter__New_upper_bound_on_God%27s_algorithm_for_Rubik%27s_cube.html"
>37 moves</a> just one day later!</td></tr>
<tr><td>January, 1995</td><td>18</td><td>29</td><td>11</td>
<td class="notes">Michael Reid cuts the upper bound to <a
href="http://www.math.rwth-aachen.de/~Martin.Schoenert/Cube-Lovers/michael_reid__new_upper_bounds.html"
>29 moves</a>.</td></tr>
<tr><td>January, 1995</td><td>20</td><td>29</td><td>9</td>
<td class="notes">Michael Reid proves that the ''superflip'' position
(corners correct, edges placed but flipped) requires <a
href="http://www.math.rwth-aachen.de/~Martin.Schoenert/Cube-Lovers/michael_reid__superflip_requires_20_face_turns.html"
>20 moves</a>.</td></tr>
<tr><td>December, 2005</td><td>20</td><td>28</td><td>8</td>
<td class="notes">Silviu Radu shows that <a
href="http://cubezzz.homelinux.org/drupal/?q=node/view/37"
>28 moves</a> is always enough.</td></tr>
<tr><td>April, 2006</td><td>20</td><td>27</td><td>7</td>
<td class="notes">Silviu Radu improves his bound to <a
href="http://cubezzz.homelinux.org/drupal/?q=node/view/53"
>27 moves</a>.</td></tr>
<tr><td>May, 2007</td><td>20</td><td>26</td><td>6</td>
<td class="notes">Dan Kunkle and Gene Cooperman prove <a
href="http://www.northeastern.edu/nupr/news/0507/rubik.html"
>26 moves</a> suffice.</td></tr>
<tr><td>March, 2008</td><td>20</td><td>25</td><td>5</td>
<td class="notes">Tomas Rokicki cuts the upper bound to <a
href="http://arxiv.org/abs/0803.3435">25 moves</a>.</td></tr>
<tr><td>April, 2008</td><td>20</td><td>23</td><td>3</td>
<td class="notes">Tomas Rokicki and John Welborn reduce it to only <a
href="http://cubezzz.homelinux.org/drupal/?q=node/view/117"
>23 moves</a>.</td></tr>
<tr><td>August, 2008</td><td>20</td><td>22</td><td>2</td>
<td class="notes">Tomas Rokicki and John Welborn continue down to <a
href="http://www.springerlink.com/content/q088143tn805k124/"
>22 moves</a>.</td></tr>
<tr><td>July, 2010</td><td>20</td><td>20</td><td>0</td>
<td class="notes">Morley Davidson, John Dethridge, Herbert Kociemba, and
Tomas Rokicki prove that God's number for the Cube
is exactly 20.</td></tr>
</table>
<h2>How We Did It</h2>
How did we solve all 43,252,003,274,489,856,000 positions of the Cube?
<p>
<ul>
<li>We partitioned the positions into 2,217,093,120 sets
of 19,508,428,800 positions each.</li>
<li>We reduced the count of sets we needed to solve to 55,882,296
using symmetry and set covering.</li>
<li>We did not find optimal solutions to each position, but instead
only solutions of length 20 or less.</li>
<li>We wrote a program that solved a single set in about 20 seconds.</li>
<li>We used about 35 CPU years to find solutions to all of the
positions in each of the 55,882,296 sets.</li>
</ul>

<h4>Partitioning</h4>

We broke the problem down into 2,217,093,120 smaller problems, each
comprising 19,508,428,800 different positions.  Each of these subproblems
was small enough to fit in the memory of a modern PC, and the way
we broke it down (mathematically, using cosets of the group generated
by {U,F2,R2,D,B2,L2}, or more concisely, H cosets) allowed us to
solve each set rapidly.

<h4>Symmetry</h4>

If you take a scrambled Cube and turn it upside down, you have not
made it any more difficult; it will still take the same number
of moves to solve.  Instead of solving both of these positions,
you can simply solve one, and then turn the solution upside down
for the other.  There are 24 different ways you can orient the
Cube in space, and another factor of two using a mirror, for a total
reduction of <a
href="http://www.math.rwth-aachen.de/~Martin.Schoenert/Cube-Lovers/Dan_Hoey__The_real_size_of_cube_space.html"
>about 48</a> in the number of positions that need solving.  Using
similar symmetry arguments and by finding a solution to a large
"set cover" problem, we were able to reduce the number of sets
that needed solving from 2,217,093,120 down to 55,882,296.

<h4>Good versus Optimal Solutions</h4>

An optimal solution to a position is one that requires no more
moves than is required.  Since a position that required 20 moves
was already known, we did not need to optimally solve every position;
we just needed to find a solution of 20 moves or less for each
sequence.  This is substantially easier; a modern PC has the following
speed when solving random positions:
<p>
<div class="iecenter">
<table class="center">
<tr><td>Optimally solve random positions</td><td>0.36 positions/second</td></tr>
<tr><td>Solve in 20 moves or less</td><td>3,900 positions/second</td></tr>
</table>
</div>

<h4>Fast H-coset Solving Program</h4>

Using a combination of mathematical tricks and careful programming,
we were able to solve a complete H coset, either optimally, or with
sequences of twenty moves or less, at the following speed on a single
desktop PC:
<p>
<div class="iecenter">
<table class="center">
<tr><td>Optimally solve H coset</td><td>2,000,000 positions/second</td></tr>
<tr><td>Solve in 20 moves or less, H coset</td>
    <td> 1,000,000,000 positions per second</td></tr>
</table>
</div>
<h4>Lots of Computers</h4>

Finally, we were able to distribute the 55,882,296 H-cosets among
a large number of computers at Google and complete the computation
in just a few weeks.  Google does not release information on their
computer systems, but it would take a common desktop PC (Intel Nehalem,
four-core, 2.8GHz) 1.1 billion seconds, or about 35 CPU years,
to perform this calculation.

<h3>What are the Hardest Positions?</h3>

<table class="rightfloat"><tr><th>Distance</th><th>Count of Positions</th></tr>
<tr><td>0</td><td>1</td></tr>
<tr><td>1</td><td>18</td></tr>
<tr><td>2</td><td>243</td></tr>
<tr><td>3</td><td>3,240</td></tr>
<tr><td>4</td><td>43,239</td></tr>
<tr><td>5</td><td>574,908</td></tr>
<tr><td>6</td><td>7,618,438</td></tr>
<tr><td>7</td><td>100,803,036</td></tr>
<tr><td>8</td><td>1,332,343,288</td></tr>
<tr><td>9</td><td>17,596,479,795</td></tr>
<tr><td>10</td><td>232,248,063,316</td></tr>
<tr><td>11</td><td>3,063,288,809,012</td></tr>
<tr><td>12</td><td>40,374,425,656,248</td></tr>
<tr><td>13</td><td>531,653,418,284,628</td></tr>
<tr><td>14</td><td>6,989,320,578,825,358</td></tr>
<tr><td>15</td><td>91,365,146,187,124,313</td></tr>
<tr><td>16</td><td>about 1,100,000,000,000,000,000</td></tr>
<tr><td>17</td><td>about 12,000,000,000,000,000,000</td></tr>
<tr><td>18</td><td>about 29,000,000,000,000,000,000</td></tr>
<tr><td>19</td><td>about 300,000,000</td></tr>
<tr><td>20</td><td>
</table>
We have known for fifteen years that there are positions that require
20 moves; we have just proved that there are none that require more.
<p>
Distance-20 positions are both rare and plentiful; they are rarer
than one in a billion positions, yet there are probably more than
one hundred million such positions.  We do not yet know exactly
how many there are.  The following table gives the count of positions
at each distance; for distances 16 and greater, the number given
is just an estimate.  Our research has confirmed the prior results
for entries 0 through 14 below, and the entry for 15 is a new result.
We hope to have that independently confirmed by another researcher
within the month.
<p>
To date we have found about twelve million distance-20 positions.
The following position was the hardest for our programs to solve:
<p>
<div class="leftfloat">
<applet id="theApplet" mayscript="mayscript"
        codebase="." archive="RubikPlayerFlat.jar" code="RubikPlayerFlat"
        width="270" height="300">

     <-- Set applet parameters here: -->
     <param name="script"
            value="FU-F2D-BUR-F-LD-R-U-LUB-D2R-FU2D2" />
     <-- Set recommended parameters for Sun Java plug in here: -->
     <param name="codebase_lookup" value="false" />
     <param name="classloader_cache" value="false" />
     <param name="java_arguments" value="-Djnlp.packEnabled=true" />
     <param name="image" value="Splash.gif" />
     <param name="boxborder" value="false" />
     <param name="centerimage" value="true" />
</applet>
<div class="caption">
The hardest position for our programs.
</div>
</div>
<h3>Contact</h3>
Our group consists of Morley Davidson, a mathematician,
John Dethridge, an engineer at Google,
Herbert Kociemba, famous for Cube Explorer, and Tomas Rokicki, a programmer.
Email may be sent to rokicki@gmail.com.
<p>
Rubik's Cube is a registered trademark of Seven Towns, Ltd.<br>
Thanks to Werner Randelshofer for use of the Cube applet on this page.
</body></html>
